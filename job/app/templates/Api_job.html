<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Portal</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <style>
        /* General Theme */
        body {
            background-color: #f8f9fa;
            color: #333;
             /* Adjust this value based on the footer height */
        }
        /* Navbar */
        .navbar {
            background-color: #007bff;
        }
        .navbar-brand, .nav-link {
            color: white !important;
        }
      
        .container {
            flex: 1; /* Pushes footer to the bottom */
        }
        
        html, body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            flex: 1;
        }
        
        footer {
            background-color: #343a40;
            color: white;
            text-align: center;
            padding: 20px 0;
            width: 100%;
        }

        </style
</head>
<body>
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg">
          <div class="container">
              <a class="navbar-brand fw-bold" href="#">Job Portal</a>
              <div class="ml-auto">
                  {% if user.is_authenticated %}
                  <a href="#" id="profile-btn" class="btn btn-outline-light me-2 d-inline-flex align-items-center">
                      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 24 24" class="me-1">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                      </svg>
                      Profile
                    </a>
                      <form action="{% url 'logout' %}" method="POST" class="d-inline">
                          {% csrf_token %}
                          <button type="submit" class="btn btn-danger">Logout</button>
                      </form>
                  {% else %}
                  {% csrf_token %}
                      <a href="{% url 'login' %}" class="btn btn-outline-light me-2">Login</a>
                      <a href="{% url 'signup' %}" class="btn btn-light">Signup</a>
                  {% endif %}
              </div>
          </div>
      </nav>
      {% comment %} api jobs  {% endcomment %}
      <!-- Job Listings Section -->
      <div class="container my-5">
          <h2 class="text-center text-primary mb-4">Latest Job Openings</h2>
          <div class="row" id="jobList">
              <!-- Job cards will be dynamically inserted here -->
          </div>
          
          <!-- Pagination Controls -->
          <nav class="mt-4">
              <ul class="pagination justify-content-center">
                  <li class="page-item"><a class="page-link" href="#" id="prevPage">Previous</a></li>
                  <li class="page-item"><span class="page-link" id="pageNumber">1</span></li>
                  <li class="page-item"><a class="page-link" href="#" id="nextPage">Next</a></li>
              </ul>
          </nav>
      </div>
<footer class="bg-dark text-light py-4 mt-auto">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h5>Job Portal</h5>
                <p>Your trusted platform for finding the best job opportunities.</p>
            </div>
            <div class="col-md-4">
                <h5>Quick Links</h5>
                <ul class="list-unstyled">
                    <li><a href="#" class="text-light text-decoration-none">Home</a></li>
                    <li><a href="#" class="text-light text-decoration-none">Jobs</a></li>
                    <li><a href="#" class="text-light text-decoration-none">About Us</a></li>
                    <li><a href="#" class="text-light text-decoration-none">Contact</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <h5>Contact Us</h5>
                <p>Email: support@jobportal.com</p>
                <p>Phone: +91 12345 67890</p>
                <div>
                    <a href="#" class="text-light me-2"><i class="fab fa-facebook fa-lg"></i></a>
                    <a href="#" class="text-light me-2"><i class="fab fa-twitter fa-lg"></i></a>
                    <a href="#" class="text-light"><i class="fab fa-linkedin fa-lg"></i></a>
                </div>
            </div>
        </div>
        <div class="text-center mt-3">
            <p class="mb-0">&copy; 2025 Job Portal. All rights reserved.</p>
        </div>
    </div>
</footer>
<script>
    
    $(document).ready(function() {
        let jobsData = [];
        let currentPage = 1;
        const jobsPerPage = 5;

        function fetchJobs() {
            $.ajax({
                url: "https://jsearch.p.rapidapi.com/search",
                method: "GET",
                data: {
                    query: "developer jobs in India",
                    page: 1,
                    num_pages: 2,
                    country: "IN",
                    date_posted: "all"
                },
                headers: {
                    "x-rapidapi-key": "3593c4343fmsh86f5b5f05693490p15a3d0jsnc345a88d1f86",
                    "x-rapidapi-host": "jsearch.p.rapidapi.com"
                },
                success: function(response) {
                    jobsData = response.data; 
                    displayJobs();
                },
                error: function() {
                    $("#jobList").html('<div class="text-center text-danger fw-bold mt-3 h5">Error fetching job data</div>');
                }
            });
        }

        function displayJobs() {
            let jobListHtml = "";
            let start = (currentPage - 1) * jobsPerPage;
            let end = start + jobsPerPage;
            let paginatedJobs = jobsData.slice(start, end);

            paginatedJobs.forEach(job => {
                jobListHtml += `
                    <div class="col-md-4 col-sm-6 mb-4">
                        <div class="card shadow-lg border-0 rounded-4">
                            <div class="card-body p-3">
                                <h5 class="card-title fw-bold text-primary">${job.job_title}</h5>
                                <h6 class="card-subtitle mb-2 text-muted">${job.employer_name}</h6>
                                <p class="card-text">
                                    <strong>üìç Location:</strong> ${job.job_city}, ${job.job_country}<br>
                                    <strong>üí∞ Salary:</strong> ${job.salary_currency || " "} ${job.salary_min || "Not Revealed"} - ${job.salary_max || " "}
                                </p>
                                <div class="text-muted text-truncate" style="max-height: 60px; overflow: hidden;">
                                    ${job.job_description || "No description available."}
                                </div>
                                <a href="${job.job_apply_link}" target="_blank" class="btn btn-primary w-100 mt-3">Apply Now</a>
                            </div>
                        </div>
                    </div>`;
            });

            $("#jobList").html(jobListHtml);
            $("#pageNumber").text(currentPage);
            $("#prevPage").toggleClass("disabled", currentPage === 1);
            $("#nextPage").toggleClass("disabled", end >= jobsData.length);
        }

        $("#prevPage").click(function(e) {
            e.preventDefault();
            if (currentPage > 1) {
                currentPage--;
                displayJobs();
            }
        });

        $("#nextPage").click(function(e) {
            e.preventDefault();
            if ((currentPage * jobsPerPage) < jobsData.length) {
                currentPage++;
                displayJobs();
            }
        });

        fetchJobs();
    });

    $.ajax({
        url: "https://jsearch.p.rapidapi.com/search",
        method: "GET",
        data: {
            query: "developer jobs in India",
            page: 1,
            num_pages: 2,
            country: "IN",
            date_posted: "all"
        },
        headers: {
            "x-rapidapi-key": "3593c4343fmsh86f5b5f05693490p15a3d0jsnc345a88d1f86",
            "x-rapidapi-host": "jsearch.p.rapidapi.com"
        },
        success: function(response) {
            console.log(response); // Debugging API response
            jobsData = response.data; 
            displayJobs();
        },
        error: function() {
            $("#jobList").html('<div class="text-center text-danger fw-bold mt-3 h5">Error fetching job data</div>');
        }
    });


    $.ajax({
        url: "https://jsearch.p.rapidapi.com/search",
        method: "GET",
        data: {
            query: "developer jobs in India",
            page: 1,
            num_pages: 2,
            country: "IN",
            date_posted: "all"
        },
        headers: {
            "x-rapidapi-key": "3593c4343fmsh86f5b5f05693490p15a3d0jsnc345a88d1f86",
            "x-rapidapi-host": "jsearch.p.rapidapi.com"
        },
        success: function(response) {
            console.log(response);  // Prints the API response in the browser console
        },
        error: function(error) {
            console.error("Error fetching job data:", error);
        }
    });
</script>


    
</body>
</html>
